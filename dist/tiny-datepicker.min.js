!function(t){var e="object"==typeof window&&window||"object"==typeof self&&self;"undefined"==typeof module||"undefined"==typeof exports||exports.nodeType?e&&(e.tinyDatepicker=t(),"function"==typeof define&&define.amd&&define([],function(){return e.tinyDatepicker})):module.exports=t()}(function(){function g(t,e){return new Date(t,e-1,1)}function k(t,e){return new Date(t,e-1,0)}function v(t,e){return new Date(t,e,0).getDate()}function r(t,e){this.$el=t,this.$datePicker=null,this.state={showStatus:0,weekData:[],dateData:[],monthData:[],yearData:[],date:null,month:null,year:null},this.init()}r.prototype.init=function(){this.initData(),this.initDom(),this.initRender(),this.initEvent()},r.prototype.initData=function(){this.initWeekData(),this.initDateData(),this.initMonthData(),this.initYearData()},r.prototype.initWeekData=function(){this.state.weekData=["日","一","二","三","四","五","六"]},r.prototype.initDateData=function(){var t=this.state.year,e=this.state.month;if(!t||!e){var a=new Date;t=a.getFullYear(),e=a.getMonth()+1}var i=g(t,e),n=g(t,e).getDay();e=i.getMonth()+1;var r=k(t=i.getFullYear(),e),s=k(t,e).getDate(),o=r.getMonth()+1,h=r.getFullYear(),c=v(t,e),d=new Date(t,e,1),p=d.getMonth()+1,y=d.getFullYear(),l=6;if(this.clearDateData(),0===n){for(var u=6;0<=u;u--)this.state.dateData.unshift({day:u,date:s+u-6,month:o,year:h,classIndex:1});l--}for(var D=0;D<7*l;D++){var b,f,w,_=0;D<n?(b=s-n+D+1,f=o,w=h,_=1):c+n-1<D?(b=D-c-n+1,f=p,w=y,_=2):(b=D-n+1,f=e,w=t),this.state.dateData.push({day:D%7,date:b,month:f,year:w,classIndex:_})}this.state.month=e,this.state.year=t},r.prototype.initMonthData=function(){this.state.monthData=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},r.prototype.initYearData=function(){var t=this.state.year,e=t-t%10;this.clearYearData();for(var a=0;a<10;a++)this.state.yearData.push(e+a)},r.prototype.initDom=function(){var t=document.createElement("div");t.className="tiny-datepicker__wrapper",t.innerHTML=['<div class="tiny-datepicker__header">','<button class="tiny-datepicker__btn tiny-datepicker__prev-btn tiny-datepicker__prev-year">&lt;&lt;</button>','<button class="tiny-datepicker__btn tiny-datepicker__prev-btn tiny-datepicker__prev-month">&lt;</button>','<span class="tiny-datepicker__header-label tiny-datepicker__show-year"></span>','<span class="tiny-datepicker__header-label tiny-datepicker__show-month"></span>','<button class="tiny-datepicker__btn tiny-datepicker__next-btn tiny-datepicker__next-year">&gt;&gt;</button>','<button class="tiny-datepicker__btn tiny-datepicker__next-btn tiny-datepicker__next-month">&gt;</button>',"</div>",'<div class="tiny-datepicker__body">','<table class="tiny-datepicker__table tiny-datepicker__date-table">',"<thead></thead>","<tbody></tbody>","</table>",'<table class="tiny-datepicker__table tiny-datepicker__year-table" style="display:none">',"<tbody></tbody>","</table>",'<table class="tiny-datepicker__table tiny-datepicker__month-table" style="display: none">',"<tbody></tbody>","</table>","</div>"].join(""),this.$datePicker=t,this.$showYear=this.getDom(".tiny-datepicker__show-year"),this.$showMonth=this.getDom(".tiny-datepicker__show-month"),this.$dateTable=this.getDom(".tiny-datepicker__date-table"),this.$monthTable=this.getDom(".tiny-datepicker__month-table"),this.$yearTable=this.getDom(".tiny-datepicker__year-table"),this.$prevYear=this.getDom(".tiny-datepicker__prev-year"),this.$prevMonth=this.getDom(".tiny-datepicker__prev-month"),this.$nextMonth=this.getDom(".tiny-datepicker__next-month"),this.$nextYear=this.getDom(".tiny-datepicker__next-year")},r.prototype.initRender=function(){this.render(),document.body.appendChild(this.$datePicker)},r.prototype.render=function(){this.renderWeekData(),this.renderDateData(),this.renderMonthData(),this.renderYearData()},r.prototype.renderWeekData=function(){var t=[],e=this.state.weekData;t.push("<tr>");for(var a=0,i=e.length;a<i;a++)t.push("<th>"+e[a]+"</th>");t.push("</tr>"),this.$dateTable.querySelector("thead").innerHTML=t.join("")},r.prototype.renderDateData=function(){for(var t=[],e=this.state.dateData,a=["available","prev-month","next-month"],i=0,n=e.length;i<n;i++){var r=e[i];i%7==0&&t.push("<tr>"),t.push('<td class="'+a[r.classIndex]+'"><span>'+r.date+"</span></td>"),i%7==6&&t.push("</tr>")}this.$dateTable.querySelector("tbody").innerHTML=t.join(""),this.isDateView()&&this.changeDateTableHeaderView()},r.prototype.renderMonthData=function(){for(var t=[],e=this.state.monthData,a=0,i=e.length;a<i;a++)a%4==0&&t.push("<tr>"),t.push("<td><span>"+e[a]+"</span></td>"),a%4==3&&t.push("</tr>");this.$monthTable.querySelector("tbody").innerHTML=t.join(""),this.isMonthView()&&this.changeMonthTableHeaderView()},r.prototype.renderYearData=function(){for(var t=[],e=this.state.yearData,a=0;a<12;a++)a%4==0&&t.push("<tr>"),t.push("<td><span>"+(e[a]||"")+"</span></td>"),a%4==3&&t.push("</tr>");this.$yearTable.querySelector("tbody").innerHTML=t.join(""),this.isYearView()&&this.changeYearTableHeaderView()},r.prototype.initEvent=function(){this.$showMonth.addEventListener("click",this.changeMonthView.bind(this)),this.$showYear.addEventListener("click",this.changeYearView.bind(this)),this.$prevYear.addEventListener("click",this.doPrevYear.bind(this)),this.$prevMonth.addEventListener("click",this.doPrevMonth.bind(this)),this.$nextMonth.addEventListener("click",this.doNextMonth.bind(this)),this.$nextYear.addEventListener("click",this.doNextYear.bind(this))},r.prototype.initChooseDateEvent=function(){},r.prototype.initChooseMonthEvent=function(){this.changeDateView()},r.prototype.initChooseYearEvent=function(){this.changeMonthView()},r.prototype.toggleMonthBtnView=function(e){[this.$showMonth,this.$prevMonth,this.$nextMonth].forEach(function(t){t.style.display=e?"block":"none"})},r.prototype.changeDateView=function(){this.changeView(0)&&(this.changeDateTableHeaderView(),this.toggleMonthBtnView(!0))},r.prototype.changeDateTableHeaderView=function(){this.$showYear.innerHTML=this.state.year+"年",this.$showMonth.innerHTML=function(t,e,a){for(var i=""+t,n=i.length;n++<a;)i=e+i;return i}(this.state.month,"0",2)+"月"},r.prototype.changeMonthView=function(){this.changeView(1)&&(this.changeMonthTableHeaderView(),this.toggleMonthBtnView(!1))},r.prototype.changeMonthTableHeaderView=function(){this.$showYear.innerHTML=this.state.year+" 年"},r.prototype.changeYearView=function(){this.changeView(2)&&(this.changeYearTableHeaderView(),this.toggleMonthBtnView(!1))},r.prototype.changeYearTableHeaderView=function(){var t=this.state.yearData,e=t[0],a=t[t.length-1];this.$showYear.innerHTML=e+" 年 - "+a+" 年"},r.prototype.changeView=function(a){return this.state.showStatus!==a&&(this.state.showStatus=a,[this.$dateTable,this.$monthTable,this.$yearTable].forEach(function(t,e){t.style.display=e===a?"":"none"}),!0)},r.prototype.doPrevMonth=function(){this.isDateView()&&(--this.state.month,this.initDateData(),this.renderDateData())},r.prototype.doNextMonth=function(){this.isDateView()&&(this.state.month+=1,this.initDateData(),this.renderDateData())},r.prototype.doPrevYear=function(){switch(this.state.showStatus){case 0:case 1:--this.state.year;break;case 2:this.state.year-=10}this.renderOfShowStatus()},r.prototype.doNextYear=function(){switch(this.state.showStatus){case 0:case 1:this.state.year+=1;break;case 2:this.state.year+=10}this.renderOfShowStatus()},r.prototype.renderOfShowStatus=function(){switch(this.state.showStatus){case 0:this.initDateData(),this.renderDateData();break;case 1:this.initMonthData(),this.renderMonthData();break;case 2:this.initYearData(),this.renderYearData()}},r.prototype.isDateView=function(){return 0===this.state.showStatus},r.prototype.isMonthView=function(){return 1===this.state.showStatus},r.prototype.isYearView=function(){return 2===this.state.showStatus},r.prototype.clearDateData=function(){this.state.dateData=[]},r.prototype.clearYearData=function(){this.state.yearData=[]},r.prototype.getDom=function(t){return this.$datePicker.querySelector(t)};var t={init:function(t,e){for(var a=document.querySelectorAll(t),i=0,n=a.length;i<n;i++)new r(a[0],e)}};return new r,t});